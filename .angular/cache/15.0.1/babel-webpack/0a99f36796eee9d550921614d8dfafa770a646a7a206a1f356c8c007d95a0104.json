{"ast":null,"code":"import { Weapon } from '@shared/model/weapon.model';\nimport { doesExist } from '@shared/utilities/common-util/common.util';\nimport { buildFormFromObject } from '@shared/utilities/form-util/form.util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../dice-roller-form/dice-roller-form.component\";\nfunction WeaponsFormComponent_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 5)(2, \"span\", 6);\n    i0.ɵɵelement(3, \"input\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 8);\n    i0.ɵɵtext(5, \" ( \");\n    i0.ɵɵelementStart(6, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function WeaponsFormComponent_ng_container_2_ng_container_1_Template_a_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const a_r5 = restoredCtx.index;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.addWeapon(a_r5));\n    });\n    i0.ɵɵtext(7, \"+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" / \");\n    i0.ɵɵelementStart(9, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function WeaponsFormComponent_ng_container_2_ng_container_1_Template_a_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const a_r5 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.removeWeapon(a_r5));\n    });\n    i0.ɵɵtext(10, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \" ) \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 10);\n    i0.ɵɵelement(13, \"greg-dice-roller-form\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const attack_r4 = ctx.$implicit;\n    const a_r5 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", a_r5)(\"ngClass\", ctx_r3.layoutClass);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"parentForm\", attack_r4.get(\"damage\"));\n  }\n}\nfunction WeaponsFormComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, WeaponsFormComponent_ng_container_2_ng_container_1_Template, 14, 3, \"ng-container\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.weaponsFormArray.controls);\n  }\n}\nfunction WeaponsFormComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function WeaponsFormComponent_ng_template_3_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.addWeapon());\n    });\n    i0.ɵɵtext(1, \"Add a Weapon or Attack\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class WeaponsFormComponent {\n  constructor() {\n    this.layoutClass = 'single';\n  }\n  set splitLines(split) {\n    this.layoutClass = split ? 'split' : 'single';\n  }\n  get weaponsFormArray() {\n    return this.parentForm.get('attacks');\n  }\n  ngOnInit() {}\n  addWeapon(idx) {\n    doesExist(idx) ? this.weaponsFormArray.push(buildFormFromObject(new Weapon())) : this.weaponsFormArray.insert(idx, buildFormFromObject(new Weapon()));\n  }\n  removeWeapon(idx) {\n    if (doesExist(idx)) {\n      this.weaponsFormArray.removeAt(idx);\n    } else {\n      throw Error('Index is required when removing a weapon or attack');\n    }\n  }\n}\nWeaponsFormComponent.ɵfac = function WeaponsFormComponent_Factory(t) {\n  return new (t || WeaponsFormComponent)();\n};\nWeaponsFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WeaponsFormComponent,\n  selectors: [[\"greg-weapons-form\"]],\n  inputs: {\n    parentForm: \"parentForm\",\n    splitLines: \"splitLines\"\n  },\n  decls: 5,\n  vars: 3,\n  consts: [[3, \"formGroup\"], [\"formArrayName\", \"attacks\"], [4, \"ngIf\", \"ngIfElse\"], [\"noAttacks\", \"\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroupName\", \"ngClass\"], [1, \"input\"], [\"formControlName\", \"name\", \"type\", \"text\"], [1, \"add-remove\"], [3, \"click\"], [1, \"dice-form\"], [3, \"parentForm\"]],\n  template: function WeaponsFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵelementContainerStart(1, 1);\n      i0.ɵɵtemplate(2, WeaponsFormComponent_ng_container_2_Template, 2, 1, \"ng-container\", 2);\n      i0.ɵɵtemplate(3, WeaponsFormComponent_ng_template_3_Template, 2, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.parentForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.weaponsFormArray.length > 0)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i1.NgClass, i1.NgForOf, i1.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormGroupName, i2.FormArrayName, i3.DiceRollerFormComponent],\n  styles: [\"input[type=number][_ngcontent-%COMP%] {\\n  width: 2em;\\n}\\n\\ndiv.split[_ngcontent-%COMP%], div.single[_ngcontent-%COMP%] {\\n  display: grid;\\n  column-gap: 0.5em;\\n}\\n\\ndiv.single[_ngcontent-%COMP%] {\\n  grid-template-columns: 2fr 2fr 1fr;\\n  grid-template-areas: \\\"input form add-remove\\\";\\n}\\ndiv.split[_ngcontent-%COMP%] {\\n  grid-template-columns: 2fr 1fr;\\n  grid-template-rows: auto;\\n  grid-template-areas: \\\"input add-remove\\\" \\\"form form\\\";\\n}\\n\\nspan.input[_ngcontent-%COMP%] {\\n  grid-area: input;\\n  text-align: right;\\n}\\nspan.add-remove[_ngcontent-%COMP%] {\\n  grid-area: add-remove;\\n}\\nspan.dice-form[_ngcontent-%COMP%] {\\n  grid-area: form;\\n}\\n/*# sourceURL=webpack://./src/assets/styles/_variables.scss */\\n/*# sourceURL=webpack://./src/app/shared/components/weapons-form/weapons-form.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hc3NldHMvc3R5bGVzL192YXJpYWJsZXMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvd2VhcG9ucy1mb3JtL3dlYXBvbnMtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFhRTtFQUNFLFVBRjRCO0FDVmhDOztBQUNBO0VBQ0UsYUFBQTtFQUNBLGlCQUFBO0FBRUY7O0FBRUU7RUFFRSxrQ0FBQTtFQUNBLDRDQUFBO0FBQUo7QUFHRTtFQUVFLDhCQUFBO0VBQ0Esd0JBQUE7RUFDQSxtREFDRTtBQUhOOztBQVNFO0VBQ0UsZ0JBQUE7RUFDQSxpQkFBQTtBQU5KO0FBU0U7RUFDRSxxQkFBQTtBQVBKO0FBVUU7RUFDRSxlQUFBO0FBUkoiLCJzb3VyY2VzQ29udGVudCI6W251bGwsImlucHV0W3R5cGU9bnVtYmVyXSB7XG4gIHdpZHRoOiAyZW07XG59XG5cbmRpdi5zcGxpdCwgZGl2LnNpbmdsZSB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGNvbHVtbi1nYXA6IDAuNWVtO1xufVxuXG5kaXYuc2luZ2xlIHtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyZnIgMmZyIDFmcjtcbiAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogXCJpbnB1dCBmb3JtIGFkZC1yZW1vdmVcIjtcbn1cbmRpdi5zcGxpdCB7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMmZyIDFmcjtcbiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBhdXRvO1xuICBncmlkLXRlbXBsYXRlLWFyZWFzOiBcImlucHV0IGFkZC1yZW1vdmVcIiBcImZvcm0gZm9ybVwiO1xufVxuXG5zcGFuLmlucHV0IHtcbiAgZ3JpZC1hcmVhOiBpbnB1dDtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG59XG5zcGFuLmFkZC1yZW1vdmUge1xuICBncmlkLWFyZWE6IGFkZC1yZW1vdmU7XG59XG5zcGFuLmRpY2UtZm9ybSB7XG4gIGdyaWQtYXJlYTogZm9ybTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAEA,SAASA,MAAM,QAAQ,4BAA4B;AACnD,SAASC,SAAS,QAAQ,2CAA2C;AACrE,SAASC,mBAAmB,QAAQ,uCAAuC;;;;;;;;ICDrEC,6BAEC;IACCA,8BAAiD;IAE7CA,2BAA4C;IAC9CA,iBAAO;IACPA,+BAAyB;IACvBA,mBACA;IAAAA,4BAA0B;IAAvBA;MAAA;MAAA;MAAA;MAAA,OAASA,qCAAY;IAAA,EAAC;IAACA,iBAAC;IAAAA,iBAAI;IAC/BA,mBACA;IAAAA,4BAA6B;IAA1BA;MAAA;MAAA;MAAA;MAAA,OAASA,wCAAe;IAAA,EAAC;IAACA,kBAAC;IAAAA,iBAAI;IAClCA,oBACF;IAAAA,iBAAO;IACPA,iCAAwB;IACtBA,6CAEyB;IAC3BA,iBAAO;IAEXA,0BAAe;;;;;;IAjBRA,eAAmB;IAAnBA,oCAAmB;IAalBA,gBAAmC;IAAnCA,oDAAmC;;;;;IAjB7CA,6BAAkE;IAChEA,uGAoBe;IACjBA,0BAAe;;;;IApBQA,eAA8B;IAA9BA,0DAA8B;;;;;;IAsBnDA,4BAAyB;IAAtBA;MAAAA;MAAA;MAAA,OAASA,iCAAW;IAAA,EAAC;IAACA,sCAAsB;IAAAA,iBAAI;;;ADfzD,OAAM,MAAOC,oBAAoB;EAW/BC;IALA,gBAAW,GAAG,QAAQ;EAKP;EATf,IAAaC,UAAU,CAACC,KAAc;IACpC,IAAI,CAACC,WAAW,GAAGD,KAAK,GAAG,OAAO,GAAG,QAAQ;EAC/C;EAGA,IAAIE,gBAAgB;IAClB,OAAO,IAAI,CAACC,UAAU,CAACC,GAAG,CAAC,SAAS,CAAqB;EAC3D;EAIAC,QAAQ,IAAU;EAElBC,SAAS,CAACC,GAAY;IACpBb,SAAS,CAACa,GAAG,CAAC,GACV,IAAI,CAACL,gBAAgB,CAACM,IAAI,CAACb,mBAAmB,CAAC,IAAIF,MAAM,EAAE,CAAC,CAAC,GAC7D,IAAI,CAACS,gBAAgB,CAACO,MAAM,CAACF,GAAG,EAAEZ,mBAAmB,CAAC,IAAIF,MAAM,EAAE,CAAC,CAAC;EAC1E;EAEAiB,YAAY,CAACH,GAAW;IACtB,IAAIb,SAAS,CAACa,GAAG,CAAC,EAAE;MAClB,IAAI,CAACL,gBAAgB,CAACS,QAAQ,CAACJ,GAAG,CAAC;KACpC,MAAM;MACL,MAAMK,KAAK,CAAC,oDAAoD,CAAC;;EAErE;;;mBA3BWf,oBAAoB;AAAA;;QAApBA,oBAAoB;EAAAgB;EAAAC;IAAAX;IAAAJ;EAAA;EAAAgB;EAAAC;EAAAC;EAAAC;IAAA;MCXjCtB,+BAA+B;MAC7BA,gCAAsC;MACpCA,uFAsBe;MACfA,sHAEc;MAChBA,0BAAe;MACjBA,iBAAO;;;;MA7BDA,0CAAwB;MAEXA,eAAmC;MAAnCA,sDAAmC","names":["Weapon","doesExist","buildFormFromObject","i0","WeaponsFormComponent","constructor","splitLines","split","layoutClass","weaponsFormArray","parentForm","get","ngOnInit","addWeapon","idx","push","insert","removeWeapon","removeAt","Error","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\workspaces\\greg\\src\\app\\shared\\components\\weapons-form\\weapons-form.component.ts","D:\\workspaces\\greg\\src\\app\\shared\\components\\weapons-form\\weapons-form.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { UntypedFormArray, UntypedFormGroup } from '@angular/forms';\r\nimport { Weapon } from '@shared/model/weapon.model';\r\nimport { doesExist } from '@shared/utilities/common-util/common.util';\r\nimport { buildFormFromObject } from '@shared/utilities/form-util/form.util';\r\n\r\n@Component({\r\n  selector: 'greg-weapons-form',\r\n  templateUrl: './weapons-form.component.html',\r\n  styleUrls: ['./weapons-form.component.scss'],\r\n})\r\nexport class WeaponsFormComponent implements OnInit {\r\n  @Input() parentForm: UntypedFormGroup;\r\n  @Input() set splitLines(split: boolean) {\r\n    this.layoutClass = split ? 'split' : 'single';\r\n  }\r\n\r\n  layoutClass = 'single';\r\n  get weaponsFormArray(): UntypedFormArray {\r\n    return this.parentForm.get('attacks') as UntypedFormArray;\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  addWeapon(idx?: number): void {\r\n    doesExist(idx)\r\n      ? this.weaponsFormArray.push(buildFormFromObject(new Weapon()))\r\n      : this.weaponsFormArray.insert(idx, buildFormFromObject(new Weapon()));\r\n  }\r\n\r\n  removeWeapon(idx: number): void {\r\n    if (doesExist(idx)) {\r\n      this.weaponsFormArray.removeAt(idx);\r\n    } else {\r\n      throw Error('Index is required when removing a weapon or attack');\r\n    }\r\n  }\r\n}\r\n","<form [formGroup]=\"parentForm\">\r\n  <ng-container formArrayName=\"attacks\">\r\n    <ng-container *ngIf=\"weaponsFormArray.length > 0; else noAttacks\">\r\n      <ng-container\r\n        *ngFor=\"let attack of weaponsFormArray.controls; index as a\"\r\n      >\r\n        <div [formGroupName]=\"a\" [ngClass]=\"layoutClass\">\r\n          <span class=\"input\">\r\n            <input formControlName=\"name\" type=\"text\" />\r\n          </span>\r\n          <span class=\"add-remove\">\r\n            (\r\n            <a (click)=\"addWeapon(a)\">+</a>\r\n            /\r\n            <a (click)=\"removeWeapon(a)\">-</a>\r\n            )\r\n          </span>\r\n          <span class=\"dice-form\">\r\n            <greg-dice-roller-form\r\n              [parentForm]=\"attack.get('damage')\"\r\n            ></greg-dice-roller-form>\r\n          </span>\r\n        </div>\r\n      </ng-container>\r\n    </ng-container>\r\n    <ng-template #noAttacks>\r\n      <a (click)=\"addWeapon()\">Add a Weapon or Attack</a>\r\n    </ng-template>\r\n  </ng-container>\r\n</form>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}