<form [formGroup]="encounterTableForm">
  <!-- Roll Dice -->
  <h3>Define Dice Pool</h3>
  <div class="add-remove">
    <a (click)="addDieRolled()">Add</a>
    |
    <a (click)="clearDiceRolled()">Clear</a>
    |
    <a (click)="updateDiceRolled()">Update Table</a>
  </div>
  <ng-container *ngIf="formDiceRolled.length !== 0; else noDice">
    <div class="dice-rolled-form" formArrayName="diceRolled">
      <ng-container *ngFor="let die of formDiceRolled.controls; index as i">
        <div [formGroupName]="i">
          {{ i + 1 }}.
          <input formControlName="no" type="number" />
          D
          <input formControlName="pips" type="number" />
          +/-
          <input formControlName="modifier" type="number" />
          x
          <input formControlName="multiplier" type="number" />
          <a (click)="removeDieRolled(i)">(Delete)</a>
        </div>
      </ng-container>
    </div>
  </ng-container>
  <ng-template #noDice>
    <div class="no-dice">No dice have yet been added.</div>
  </ng-template>
  <h3>Define Result Table</h3>
  <div class="table-form">
    <a (click)="clearTableForm()">Clear</a>
    |
    <a (click)="updateEncounters()">Publish</a>
  </div>
  <div formArrayName="encounters">
    <table>
      <tr>
        <th>Die Roll</th>
        <th>Wandering Monster</th>
        <th>No.</th>
        <th>AC</th>
        <th>HD</th>
        <th>Attack &amp; Damage</th>
        <th>Move</th>
        <th>Save As</th>
        <th>Morale</th>
      </tr>
      <ng-container *ngIf="formEncounters.length !== 0; else noMonsters">
        <ng-container
          *ngFor="let encounter of formEncounters.controls; index as i"
        >
          <tr [formGroupName]="i">
            <td>
              <input
                formControlName="lowRoll"
                style="width: 1.5em"
                type="number"
              />
              -
              <input
                formControlName="highRoll"
                style="width: 1.5em"
                type="number"
              />
            </td>
            <td>Wandering Monster</td>
            <td>No.</td>
            <td>AC</td>
            <td>HD</td>
            <td>Attack &amp; Damage</td>
            <td>Move</td>
            <td>Save As</td>
            <td>Morale</td>
          </tr>
        </ng-container>
      </ng-container>
      <ng-template #noMonsters>
        <tr style="font-style: italic">
          <td colspan="9">No Encounters Yet</td>
        </tr>
      </ng-template>
    </table>
  </div>
</form>
<p>{{ encounterTable | json }}</p>
